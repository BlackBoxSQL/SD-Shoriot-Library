## 12. [How to Deploy a Django Application to Digital Ocean](https://simpleisbetterthancomplex.com/tutorial/2016/10/14/how-to-deploy-to-digital-ocean.html) by Vitor Freitas.

#### or you can try it.

###### DigitalOcean is a Virtual Private Server (VPS) provider. In this tutorial I will guide you through the steps I go to deploy a Django application using 
* Ubuntu 16.04
* Git 
* PostgreSQL
* NGINX
* Supervisor
* Gunicorn

1. Go to: [Digital Ocean](https://www.digitalocean.com/) then Sing Up & Login

2. Create a New Droplet:
```python
Pick the Ubuntu 16.04.1 distribution:
```
3. Select the size of the Droplet (cloud server):
```python
Like: $ 5/month or $ 10/month
```
4. Select the region you want to deploy:
```python
Like: New York or London
```
5. Finally pick a name for the Droplet & click on Create. After that you will see the recently created droplet in your profile:

6. You will receive the root password via email. Now pick the IP Address and ssh into the server:
```python
$ ssh root@107.170.28.172
```
* You will be asked to change the root password upon the first login.

* Also if you prefer, you can use the Digital Ocean’s console:

7. Installing the Server Dependencies

* First thing let’s upgrade the packages:
```python
$ sudo apt-get update
$ sudo apt-get -y upgrade
```
8. PostgreSQL

* Install the dependencies to use PostgreSQL with Python/Django:
```python
$ sudo apt-get -y install build-essential libpq-dev python-dev
```
* Install the PostgreSQL Server:
```python
$ sudo apt-get -y install postgresql postgresql-contrib
```

9. NGINX

* Install NGINX, which will be used to serve static assets (css, js, images) and also to run the Django application behind a proxy server:
```python
$ sudo apt-get -y install nginx
```

10. Supervisor

* Supervisor will start the application server and manage it in case of server crash or restart:
```python
$ sudo apt-get -y install supervisor
```
* Enable and start the Supervisor:
```python
$ sudo systemctl enable supervisor

$ sudo systemctl start supervisor
```

11. Python Virtualenv

* The Django application will be deployed inside a Python Virtualenv, for a better requirements management:

```python
$ sudo apt-get -y install python-virtualenv
```

12. Configure PostgreSQL Database

* Switch users:
```python
$ su - postgres
```
* Create a database user and the application database:
```python
$ createuser u_urban
$ createdb urban_prod --owner u_urban
$ psql -c "ALTER USER u_urban WITH PASSWORD '123'"
```

* PS: Make sure to pick a secure password! I’m using 123 for simplicity sake.

* We can now go back to the root user, simply exit:
```python
$ exit
```

13. Configure The Application User

* Create a new user with the command below:
```python
$ adduser urban
```
* Usually I just use the application name. You will be asked a few questions.

* Add the user to the list of sudoers:
```python
$ gpasswd -a urban sudo
```
* Switch to the recently created user:
```python
$ su - urban
```

14. Configure the Python Virtualenv

* At this point we are logged in with the urban user (or whatever named you selected). We will install our Django application in this user’s home directory /home/urban:
```python
$ virtualenv .
$ source bin/activate
```
* Clone the repository:
```python
$ git clone
```
* First open the urban-train directory:
```python
$ cd urban-train
```
* Install the project’s dependencies:
```python
$ pip install -r requirements.txt
```
* At this point you will need to set the database credentials in the settings.py file:
```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'urban_prod',
        'USER': 'u_urban',
        'PASSWORD': '123',
        'HOST': 'localhost',
        'PORT': '',
    }
}
```
* PS: There are better and secure ways to handle SECRET_KEY, database credentials etc. I’m editing it directly in the settings.py file for the sake of simplicity. The focus of this tutorial is on the deployment process itself.

* Migrate the database:
```python
$ python manage.py migrate
```
* Collect the static files:
```python
$ python manage.py collectstatic
```
* Test if everything is okay:
```python
$ python manage.py runserver 0.0.0.0:8000
```
* Access the IP Address of your server using port 8000. In my case, 107.170.28.172:8000.

* This is just a test. We won’t be using the runserver to run our application. We will be using a proper application server to securely serve our application.

* Hit CONTROL-C to quit the development server and let’s keep moving forward.

15. Configure Gunicorn

---

> Please inbox **[me](https://www.facebook.com/shoriot)** if you've any questions.